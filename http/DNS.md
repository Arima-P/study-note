# DNS

> DNS 协议提供主机名到 IP 地址的转换服务，常说的域名系统。是应用层协议，通常该协议运行在 [UDP 协议](./TCP、UDP.md) 之上，使用 53 端口

## 递归查询和迭代查询

- 递归查询，查询请求发出后，域名服务器代为向下一级域名服务器发出请求，最后向用户返回最终的查询结果。用户只需要发出一次查询请求。
  - 本地服务器查询是递归查询
  - 浏览器缓存 -》 本地 Hosts 文件 -》本地 DNS 解析器 -》 其他域名服务器
- 迭代查询，查询请求发出后，域名服务器返回单词查询的结果，下一级的查询，由用户自己请求。用户需要发出多次查询请求。
  - 本地 DNS 服务器向其他域名服务器请求的过程是迭代查询的过程

## DNS 缓存

在一个请求中，当某个 DNS 服务器收到一个 DNS 回答后，它能够回答中的信息缓存在本地存储器中。**返回的资源记录中的 TTL 代表该条记录的缓存时间。**

## DNS 实现负载均衡

将用户的请求均衡的分配到各个不同的服务器上，这样来实现负载均衡。

## 使用 UDP 协议作为传输层协议

**避免使用 TCP 协议时造成连接时延**

- 为了获得一个 IP 地址，往往会向多个域名服务器查询，使用 TCP 的话 ，每次请求都存在连接时延，使 DNS 服务变得很慢
- 大多数地址查询请求，都是浏览器请求页面时发出的，会导致页面等待时间过长
